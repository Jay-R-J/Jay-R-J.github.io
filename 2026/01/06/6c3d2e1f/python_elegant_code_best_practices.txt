# Python优雅代码最佳实践

## 1. 遵循PEP 8规范

### 命名规范
- 变量名和函数名：使用snake_case（小写字母+下划线）
- 类名：使用PascalCase（首字母大写+无下划线）
- 常量：使用全大写+下划线
- 模块名：使用小写字母，避免使用下划线

### 代码布局
- 每行不超过79个字符
- 函数和类之间空两行
- 函数内部逻辑块之间空一行
- 使用4个空格缩进

## 2. 利用Python的特性

### 列表推导式
```python
# 不优雅
squares = []
for num in range(10):
    squares.append(num ** 2)

# 优雅
squares = [num ** 2 for num in range(10)]
```

### 生成器表达式
```python
# 不优雅
sum = 0
for num in range(1000000):
    sum += num

# 优雅
sum = sum(num for num in range(1000000))
```

### 字典推导式
```python
# 不优雅
word_lengths = {}
for word in words:
    word_lengths[word] = len(word)

# 优雅
word_lengths = {word: len(word) for word in words}
```

## 3. 函数设计

### 函数应该短小精悍
- 函数长度最好不超过20行
- 每个函数只做一件事

### 使用默认参数和关键字参数
```python
# 不优雅
def create_user(name, email, age, is_admin):
    pass

# 优雅
def create_user(name, email, age=18, is_admin=False):
    pass
```

### 使用类型提示
```python
# 不优雅
def calculate_area(radius):
    return 3.14 * radius ** 2

# 优雅
def calculate_area(radius: float) -> float:
    return 3.14 * radius ** 2
```

## 4. 异常处理

### 精确捕获异常
```python
# 不优雅
try:
    # 代码
    pass
except Exception as e:
    print(f"错误: {e}")

# 优雅
try:
    # 代码
    pass
except FileNotFoundError as e:
    print(f"文件不存在: {e}")
except PermissionError as e:
    print(f"没有权限: {e}")
```

## 5. 代码可读性

### 使用有意义的变量名
```python
# 不优雅
def f(a, b):
    c = a + b
    return c

# 优雅
def calculate_sum(first_number: int, second_number: int) -> int:
    sum_result = first_number + second_number
    return sum_result
```

### 添加适当的注释
```python
# 不优雅
# 计算圆的面积
def calc_area(r):
    return 3.14 * r ** 2

# 优雅
# 使用π的近似值计算圆的面积，π取3.14以保证计算速度
def calculate_circle_area(radius: float) -> float:
    return 3.14 * radius ** 2
```

## 6. 性能优化

### 使用内置函数和库
Python的内置函数经过优化，比自己实现的相同功能更快。

### 避免不必要的计算
```python
# 不优雅
for item in data:
    if expensive_function(item) > threshold:
        # 处理
        pass

# 优雅
for item in data:
    result = expensive_function(item)
    if result > threshold:
        # 处理
        pass
```

## 7. 使用上下文管理器

```python
# 不优雅
file = open("data.txt", "r")
try:
    content = file.read()
finally:
    file.close()

# 优雅
with open("data.txt", "r") as file:
    content = file.read()
```

## 8. 测试你的代码

编写单元测试确保代码按预期工作，使用unittest或pytest框架。

## 9. 不断学习和改进

- 阅读优秀的开源代码
- 参加Python社区活动
- 关注Python相关的博客和公众号

# 总结

写出优雅的Python代码需要遵循规范，充分利用Python的特性，注重代码可读性和性能。优雅的代码不仅易于阅读和维护，还能提高开发效率和代码质量。